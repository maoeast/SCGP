# 生活自理适应综合训练系统 - 开发计划文档

## 一、项目概览

### 项目名称
生活自理适应综合训练系统（Self-Care ATS）

### 产品目标
为特殊教育学校设计一个电子化评估和训练系统，帮助学生提高生活自理能力。

### 技术栈
- **前端框架**：Vue 3 + Vite
- **路由管理**：Vue Router
- **状态管理**：Pinia（可选）
- **数据库**：SQL.js（SQLite）
- **桌面应用**：Electron
- **样式**：CSS3 + SCSS

### 应用架构
- 离线优先设计（所有数据本地存储）
- 单机部署，无需网络连接
- 支持Windows、macOS、Linux

---

## 二、开发阶段划分

### 第一阶段：基础框架搭建（1-2周）
**目标**：完成项目基础框架和数据库初始化

#### 任务1.1 项目初始化与工程搭建
- [ ] 使用Vite初始化Vue 3项目
- [ ] 配置Electron集成（main.js和preload.js）
- [ ] 安装必要依赖包
- [ ] 配置开发环境和构建配置
- [ ] 配置CSS/SCSS预处理

#### 任务1.2 SQL.js数据库初始化
- [ ] 集成SQL.js库
- [ ] 设计数据库表结构（参考7.1节共20个表）
- [ ] 编写数据库初始化脚本
- [ ] 实现数据库操作基础API层

#### 任务1.3 路由框架搭建
- [ ] 配置Vue Router
- [ ] 划分主要路由：登录、管理员、教师、学生
- [ ] 创建基础页面骨架
- [ ] 实现权限路由守卫

#### 任务1.4 状态管理初始化
- [ ] 配置Pinia store
- [ ] 设计store结构（user、student、assessment、training等模块）
- [ ] 实现基础store模板

---

### 第二阶段：核心系统模块（2-3周）

#### 任务2.1 用户认证与权限管理
- [ ] 实现登录界面
- [ ] 实现本地加密存储密码（AES-256）
- [ ] 实现账号密码验证逻辑
- [ ] 实现基于角色的权限控制（RBAC）
- [ ] 实现记住密码功能
- [ ] 实现密码重置功能

#### 任务2.2 激活系统（★安全性核心）
- [ ] 实现机器码生成（CPU+主板信息）
- [ ] 实现试用期机制（7天试用）
- [ ] 实现RSA-2048数字签名验证
- [ ] 实现激活码验证逻辑（机器码匹配60%容忍度）
- [ ] 实现AES-256加密存储激活数据
- [ ] 实现HMAC-SHA256防篡改
- [ ] 设计激活对话框UI
- [ ] 实现激活状态检查和提示

#### 任务2.3 学生管理模块
- [ ] 设计学生管理界面
- [ ] 实现学生列表（搜索、筛选、分页）
- [ ] 实现学生新增功能
- [ ] 实现学生编辑功能
- [ ] 实现学生删除功能
- [ ] 实现学生头像拍照上传
- [ ] 实现Excel批量导入学生
- [ ] 实现学生档案查看

#### 任务2.4 数据备份与恢复
- [ ] 实现一键备份功能
- [ ] 实现一键恢复功能
- [ ] 实现备份文件管理

---

### 第三阶段：评估模块（2-3周）

#### 任务3.1 S-M量表评估框架
- [ ] 导入S-M量表132道题目数据
- [ ] 导入7个年龄阶段配置
- [ ] 导入常模数据和粗分-标准分换算表
- [ ] 实现年龄自动判断逻辑
- [ ] 设计评估答题界面
- [ ] 实现题目显示和交互（通过/不通过）
- [ ] 实现语音读题功能
- [ ] 实现评估进度显示

#### 任务3.2 S-M量表结果计算
- [ ] 实现粗分计算
- [ ] 实现SQ标准分计算
- [ ] 实现等级划分（正常≥10、边缘8-9、异常≤7）
- [ ] 实现IEP目标自动推荐
- [ ] 实现中断续做功能

#### 任务3.3 WeeFIM量表评估框架
- [ ] 导入WeeFIM量表18个题目
- [ ] 导入2大领域配置
- [ ] 设计评估答题界面（1-7分评分）
- [ ] 实现题目显示和交互
- [ ] 实现语音读题功能
- [ ] 实现评估进度显示

#### 任务3.4 WeeFIM量表结果计算
- [ ] 实现总分计算（18-126分）
- [ ] 实现ADL得分计算
- [ ] 实现认知得分计算
- [ ] 实现功能独立性等级划分
- [ ] 实现IEP目标自动推荐
- [ ] 实现中断续做功能

#### 任务3.5 评估报告生成
- [ ] 设计S-M量表报告模板
- [ ] 设计WeeFIM量表报告模板
- [ ] 实现PDF导出功能
- [ ] 实现Word导出功能
- [ ] 实现报告打印功能

---

### 第四阶段：训练模块（3-4周）

#### 任务4.1 训练任务基础设施
- [ ] 设计训练任务分类（6大分类）
- [ ] 实现训练任务数据导入
- [ ] 实现任务步骤数据结构
- [ ] 实现难度分级（L1-L4）
- [ ] 实现任务列表显示（按分类筛选）
- [ ] 实现任务搜索功能

#### 任务4.2 训练任务编辑器（教师用）
- [ ] 实现视频替换功能
- [ ] 实现视频自动裁剪（1280×800）和压缩（≤3MB）
- [ ] 实现媒体类型切换（图/图+视频/视频）
- [ ] 实现步骤文字编辑
- [ ] 实现步骤语音编辑
- [ ] 实现批量导入zip包功能

#### 任务4.3 训练执行界面（学生端）
- [ ] 设计全屏无菜单学生操作界面
- [ ] 实现步骤图显示
- [ ] 实现步骤视频播放
- [ ] 实现语音提示播放
- [ ] 实现"完成"按钮交互
- [ ] 实现重播语音/视频功能

#### 任务4.4 训练数据采集
- [ ] 实现start_time、end_time记录
- [ ] 实现total_step、finish_step记录
- [ ] 实现error_type分类（0正常、1跳过、2顺序错、3超时）
- [ ] 实现score计算（0-100）
- [ ] 实现训练日志保存到数据库

#### 任务4.5 训练计划生成与管理
- [ ] 实现评估结果到训练计划转换
- [ ] 实现个性化训练计划推荐
- [ ] 实现计划调整功能
- [ ] 实现计划进度追踪
- [ ] 实现训练记录查看
- [ ] 实现训练进度统计

#### 任务4.6 训练报告生成
- [ ] 实现训练效果报告模板
- [ ] 实现综合发展报告模板
- [ ] 实现PDF导出功能
- [ ] 实现Word导出功能
- [ ] 实现报告打印功能

---

### 第五阶段：资源库模块（1-2周）

#### 任务5.1 资源库框架
- [ ] 设计本地资源存储结构（/resources/）
- [ ] 实现资源分类管理（6大分类树形结构）
- [ ] 实现资源元数据管理
- [ ] 实现资源列表显示

#### 任务5.2 资源搜索与管理
- [ ] 实现关键词搜索功能
- [ ] 实现分类筛选功能
- [ ] 实现资源详情查看
- [ ] 实现资源打开（调用系统默认程序）
- [ ] 实现资源上传功能
- [ ] 实现资源收藏功能

#### 任务5.3 资源查看与播放
- [ ] 实现视频播放功能
- [ ] 实现音频播放功能
- [ ] 实现图片预览功能
- [ ] 实现文档打开功能
- [ ] 实现资源推荐功能

---

### 第六阶段：管理后台（1-2周）

#### 任务6.1 用户管理
- [ ] 实现用户列表显示
- [ ] 实现新增用户功能
- [ ] 实现编辑用户信息
- [ ] 实现删除用户功能
- [ ] 实现权限分配界面

#### 任务6.2 系统配置
- [ ] 实现系统参数设置
- [ ] 实现学校信息配置
- [ ] 实现报告模板配置
- [ ] 实现系统初始化向导

#### 任务6.3 操作日志与监控
- [ ] 实现操作日志记录
- [ ] 实现日志查看界面
- [ ] 实现日志导出功能
- [ ] 实现系统日志管理

#### 任务6.4 激活管理（管理员）
- [ ] 实现激活码预判生成
- [ ] 实现正式激活码生成（需机器码）
- [ ] 实现激活历史查看
- [ ] 实现已激活设备管理

---

### 第七阶段：UI/UX设计与优化（1-2周）

#### 任务7.1 整体UI设计
- [ ] 设计统一的UI风格
- [ ] 创建UI组件库
- [ ] 实现响应式布局
- [ ] 实现主题配置

#### 任务7.2 用户体验优化
- [ ] 优化页面加载速度
- [ ] 实现页面过渡动画
- [ ] 优化触屏交互
- [ ] 实现无障碍支持

#### 任务7.3 国际化支持
- [ ] 配置i18n国际化
- [ ] 翻译界面文本（中英文）
- [ ] 实现语言切换功能

---

### 第八阶段：26项生活自理评估量表开发（2-3周）

#### 任务8.1 评估量表数据准备
- [ ] 导入26项生活自理评估题目
- [ ] 建立6大领域分类结构
- [ ] 设计0-4五级评分系统
- [ ] 准备辅助等级说明
- [ ] 建立IEP目标模板库

#### 任务8.2 评估界面开发
- [ ] 设计评估量表主界面
- [ ] 实现6大领域分类展示
- [ ] 开发26项任务评估交互界面
- [ ] 实现评分选择功能（0-4分）
- [ ] 添加辅助类型记录功能
- [ ] 实现进度跟踪和断点续做

#### 任务8.3 自动评估算法开发
- [ ] 开发训练数据自动采集接口
- [ ] 实现26项任务与训练项目的映射
- [ ] 开发自动评分算法
  - 完成度评分（基于步骤完成率）
  - 独立性评分（基于辅助等级）
  - 一致性评分（基于多次训练）
- [ ] 实现评估结果可信度计算

#### 任务8.4 报告生成系统
- [ ] 设计26项评估报告模板
- [ ] 实现各领域得分雷达图
- [ ] 开发评估结果分析
  - 优势领域识别
  - 待提升领域识别
  - IEP目标自动推荐
  - 训练建议生成
- [ ] 实现PDF/Word报告导出

#### 任务8.5 系统集成
- [ ] 与现有S-M和WeeFIM评估系统集成
- [ ] 在仪表盘添加26项评估入口
- [ ] 实现三大评估结果对比分析
- [ ] 开发综合IEP建议生成器

### 第九阶段：测试与打包发布（1-2周）

#### 任务9.1 单元测试
- [ ] 编写数据库操作单元测试
- [ ] 编写计算算法单元测试
- [ ] 编写业务逻辑单元测试
- [ ] 目标覆盖率 ≥ 80%

#### 任务9.2 集成测试
- [ ] 编写评估流程集成测试
- [ ] 编写训练流程集成测试
- [ ] 编写权限控制集成测试
- [ ] 编写激活系统集成测试

#### 任务9.3 兼容性测试
- [ ] Windows测试（10/11）
- [ ] macOS测试
- [ ] Linux测试
- [ ] 触屏设备测试

#### 任务9.4 性能测试
- [ ] 数据库查询性能测试
- [ ] 大数据量测试（10000+学生）
- [ ] 内存占用测试
- [ ] CPU占用测试

#### 任务9.5 构建与打包
- [ ] 配置Electron构建
- [ ] 生成Windows安装包
- [ ] 生成macOS应用包
- [ ] 生成Linux应用包
- [ ] 配置自动更新机制

#### 任务9.6 用户测试
- [ ] 功能验收测试
- [ ] 安全性测试
- [ ] 用户体验测试
- [ ] 性能验收测试

---

## 三、时间规划

| 阶段 | 名称 | 周期 | 开始周 | 结束周 |
|------|------|------|--------|--------|
| 第一阶段 | 基础框架搭建 | 2周 | W1 | W2 |
| 第二阶段 | 核心系统模块 | 3周 | W3 | W5 |
| 第三阶段 | 评估模块 | 3周 | W6 | W8 |
| 第四阶段 | 训练模块 | 4周 | W9 | W12 |
| 第五阶段 | 资源库模块 | 2周 | W13 | W14 |
| 第六阶段 | 管理后台 | 2周 | W15 | W16 |
| 第七阶段 | UI/UX设计与优化 | 2周 | W17 | W18 |
| 第八阶段 | 26项生活自理评估量表开发 | 3周 | W19 | W21 |
| 第九阶段 | 测试与打包发布 | 2周 | W22 | W23 |

**总体周期**：23周（约5.75个月）

---

## 四、优先级规划

### P0（关键）- 必须第一时间完成
1. 基础框架和数据库
2. 用户认证与权限管理
3. **激活系统**（安全性核心）
4. S-M量表评估流程（完整）
5. WeeFIM量表评估流程（完整）
6. 训练模块基础设施
7. 评估报告生成

### P1（高）- 第二优先级
1. 训练计划生成与管理
2. 训练任务编辑器
3. 学生管理模块
4. 资源库模块
5. 管理后台

### P2（中）- 第三优先级
1. UI/UX优化
2. 性能优化
3. 国际化支持
4. 操作日志管理

### P3（低）- 后续优化
1. 高级报告分析
2. 数据可视化
3. 移动端适配
4. 云端同步（可选）

### P4（延后开发）- 26项生活自理评估量表
1. 26项评估量表数据准备
2. 自动评估算法开发
3. 训练数据采集接口
4. 综合报告生成系统
5. 三大评估系统集成

---

## 五、技术难点分析

### 5.1 核心技术难点
1. **激活系统** - RSA数字签名、机器码生成、AES加密
2. **SQL.js数据库** - 性能优化、大数据量处理
3. **Electron打包** - 跨平台兼容性
4. **视频处理** - 视频裁剪、压缩、格式转换
5. **本地文件操作** - Electron IPC通信

### 5.2 风险分析
1. **数据安全风险** - 本地加密存储的安全性
2. **性能风险** - 10000+学生数据的查询性能
3. **兼容性风险** - 不同平台的差异
4. **用户体验风险** - 特殊教育场景的易用性

### 5.3 技术选型依赖
- node-machine-id（机器码生成）
- crypto（RSA/AES加密）
- electron-store（加密存储）
- pdfkit（PDF生成）
- xlsx（Excel导入导出）

---

## 六、资源需求

### 6.1 开发人员
- 前端开发工程师：2-3人
- 后端/Electron工程师：1人
- UI/UX设计师：1人
- 测试工程师：1人
- 项目经理：1人

### 6.2 开发工具
- Visual Studio Code / WebStorm
- Git仓库管理
- 测试框架（Vitest/Jest）
- 性能分析工具

### 6.3 数据资源
- S-M量表132道题目数据
- S-M量表常模数据
- WeeFIM量表18个题目数据
- 训练任务示范视频和图片
- 资源库文档资源

---

## 七、质量标准

### 7.1 代码质量
- 代码复用率 ≥ 80%
- 圈复杂度 ≤ 10
- 注释覆盖率 ≥ 70%
- 单元测试覆盖率 ≥ 80%

### 7.2 性能指标
- 页面加载时间 < 2秒
- 数据库查询响应 < 500ms
- 支持 10000+ 学生数据
- 支持 100+ 并发用户

### 7.3 安全标准
- 密码AES-256加密存储
- 激活码RSA-2048签名验证
- 操作日志完整记录
- 数据备份定期检查

### 7.4 用户体验
- 系统响应时间 < 2秒
- 界面布局清晰直观
- 操作流程简单易用
- 支持键盘导航
- 支持触屏设备

---

## 八、里程碑

| 里程碑 | 目标 | 时间 |
|--------|------|------|
| M1 | 框架搭建完成，数据库就绪 | W2末 |
| M2 | 用户认证、激活系统完成 | W5末 |
| M3 | 评估模块（S-M+WeeFIM）完成 | W8末 |
| M4 | 训练模块完成 | W12末 |
| M5 | 所有功能模块完成 | W16末 |
| M6 | UI优化完成 | W18末 |
| M7 | 26项评估量表开发完成 | W21末 |
| M8 | 测试完成，版本发布 | W23末 |

---

## 九、后续维护计划

### 9.1 版本迭代
- 每两周一个小版本更新
- 每月一个中版本发布
- 每季度一个大版本发布

### 9.2 数据维护
- 定期更新量表数据
- 定期更新训练任务内容
- 定期备份用户数据

### 9.3 功能扩展
- 增加更多训练任务
- 增加更多评估方法
- 增加数据可视化功能
- 考虑云端同步支持

### 9.4 用户支持
- 建立技术支持团队
- 提供用户培训
- 收集用户反馈
- 定期发布用户指南

---

## 十、风险管理

### 10.1 识别的主要风险
1. **技术风险** - SQL.js性能、Electron跨平台
2. **数据风险** - 数据安全、数据准确性
3. **进度风险** - 需求变更、技术难点
4. **资源风险** - 人员不足、工具不足

### 10.2 风险应对策略
1. **技术风险** → 前期技术验证、选择成熟方案
2. **数据风险** → 加密存储、定期备份、数据验证
3. **进度风险** → 敏捷开发、定期评审、风险提前预警
4. **资源风险** → 合理的人员配置、及时招聘、工具投入

---

## 十一、附录：核心模块清单

### A. 数据库表（25个）
1. student - 学生表
2. sm_age_stage - S-M量表年龄阶段表
3. sm_question - S-M量表题目表
4. sm_norm - S-M量表常模表
5. sm_raw_to_sq - 粗分-标准分换算表
6. sm_assess - 评估主表
7. sm_assess_detail - 评估详情表
8. weefim_category - WeeFIM量表分类表
9. weefim_question - WeeFIM量表题目表
10. weefim_assess - WeeFIM量表评估主表
11. weefim_assess_detail - WeeFIM量表评估详情表
12. task - 训练任务表
13. task_level - 训练任务难度表
14. task_step - 训练任务步骤表
15. task_category - 训练任务分类表
16. train_plan - 训练计划主表
17. train_plan_detail - 训练计划详情表
18. train_log - 训练记录表
19. resource_meta - 资源表
20. teacher_fav - 教师收藏表
21. ls_assess - 26项评估主表
22. ls_assess_detail - 26项评估详情表
23. ls_task_mapping - 26项任务与训练项目映射表
24. ls_domain - 26项评估领域表
25. ls_iep_template - 26项评估IEP目标模板表

### B. 核心业务流程
1. 学生评估流程（S-M量表）
2. 学生评估流程（WeeFIM量表）
3. 学生评估流程（26项生活自理量表）
4. 学生训练流程
5. 26项自动评估流程
6. 报告生成与导出流程
7. 激活验证流程
8. 用户权限检查流程

### C. 核心安全机制
1. 用户认证与授权
2. 激活码验证（RSA-2048）
3. 密码加密存储（AES-256）
4. 数据备份与恢复
5. 操作日志记录

---

**文档更新时间**：2025年12月15日
**版本**：1.1
**维护人**：项目团队
