# ç”Ÿæ´»è‡ªç†é€‚åº”ç»¼åˆè®­ç»ƒç³»ç»Ÿ - ç³»ç»Ÿå‚æ•°æŠ€æœ¯æ–‡æ¡£

> **æ–‡æ¡£ç‰ˆæœ¬**: v1.0.0
> **ç”Ÿæˆæ—¥æœŸ**: 2025-12-31
> **é€‚ç”¨ç³»ç»Ÿç‰ˆæœ¬**: 1.0.0
> **æŠ€æœ¯è´Ÿè´£äºº**: æ­å·ç‚«ç¿ç§‘æŠ€æœ‰é™å…¬å¸

---

## ğŸ“‹ æ–‡æ¡£ç›®å½•

- [1. ç³»ç»Ÿæ¶æ„æ€»è§ˆ](#1-ç³»ç»Ÿæ¶æ„æ€»è§ˆ)
- [2. æ ¸å¿ƒæŠ€æœ¯å‚æ•°è¡¨](#2-æ ¸å¿ƒæŠ€æœ¯å‚æ•°è¡¨)
- [3. éƒ¨ç½²å‚æ•°æ¸…å•](#3-éƒ¨ç½²å‚æ•°æ¸…å•)
- [4. å®‰å…¨å‚æ•°å®¡è®¡](#4-å®‰å…¨å‚æ•°å®¡è®¡)
- [5. æ€§èƒ½ä¼˜åŒ–æŒ‡å—](#5-æ€§èƒ½ä¼˜åŒ–æŒ‡å—)
- [6. æ•…éšœæ’æŸ¥ä¸ç›‘æ§](#6-æ•…éšœæ’æŸ¥ä¸ç›‘æ§)
- [7. é™„å½•](#7-é™„å½•)

---

## 1. ç³»ç»Ÿæ¶æ„æ€»è§ˆ

### 1.1 ç³»ç»Ÿæ¶æ„å›¾

```mermaid
graph TB
    subgraph "å‰ç«¯å±‚"
        A[Vue 3.5 + TypeScript]
        B[Element Plus UI]
        C[ECharts æ•°æ®å¯è§†åŒ–]
    end

    subgraph "æ•°æ®æŒä¹…å±‚"
        D[SQL.js SQLite æ•°æ®åº“]
        E[IndexedDB æœ¬åœ°å­˜å‚¨]
    end

    subgraph "åº”ç”¨å±‚"
        F[Pinia çŠ¶æ€ç®¡ç†]
        G[Vue Router è·¯ç”±]
    end

    subgraph "æ¡Œé¢å±‚"
        H[Electron 34.5]
        I[ä¸»è¿›ç¨‹]
        J[æ¸²æŸ“è¿›ç¨‹]
    end

    subgraph "æ„å»ºå±‚"
        K[Vite 7.2 æ„å»ºå·¥å…·]
        L[Electron Builder æ‰“åŒ…]
    end

    A --> F
    A --> G
    A --> B
    A --> C
    F --> D
    F --> E
    H --> I
    H --> J
    I --> D
    J --> A
    K --> A
    L --> H

    style A fill:#42b883
    style D fill:#003b57
    style H fill:#9feaf9
```

### 1.2 æŠ€æœ¯é€‰å‹è¯´æ˜

| æŠ€æœ¯ç»„ä»¶ | ç‰ˆæœ¬ | é€‰å‹ç†ç”± | ä¼˜åŠ¿ | é£é™©ç­‰çº§ |
|---------|------|---------|------|---------|
| **Vue 3** | 3.5.25 | ç»„åˆå¼ APIã€å“åº”å¼ç³»ç»Ÿ | æ€§èƒ½ä¼˜å¼‚ã€ç”Ÿæ€å®Œå–„ã€å­¦ä¹ æˆæœ¬ä½ | ä½ |
| **TypeScript** | 5.9.0 | ç±»å‹å®‰å…¨ã€IDE æ”¯æŒ | å‡å°‘è¿è¡Œæ—¶é”™è¯¯ã€æå‡ä»£ç è´¨é‡ | ä½ |
| **Vite** | 7.2.4 | å¿«é€Ÿå¼€å‘ä½“éªŒã€ESM åŸç”Ÿæ”¯æŒ | å†·å¯åŠ¨å¿«ã€HMR æé€Ÿ | ä½ |
| **Electron** | 34.5.8 | è·¨å¹³å°æ¡Œé¢åº”ç”¨ | ä¸€å¥—ä»£ç å¤šç«¯éƒ¨ç½²ã€åŸç”Ÿèƒ½åŠ› | ä¸­ |
| **SQL.js** | 1.13.0 | çº¯å‰ç«¯æ•°æ®åº“ã€æ— éœ€åç«¯ | ç¦»çº¿è¿è¡Œã€æ•°æ®éšç§ | ä¸­ |
| **Pinia** | 3.0.4 | Vue 3 å®˜æ–¹çŠ¶æ€ç®¡ç† | API ç®€æ´ã€TypeScript å‹å¥½ | ä½ |
| **Element Plus** | 2.12.0 | ä¼ä¸šçº§ UI ç»„ä»¶åº“ | ç»„ä»¶ä¸°å¯Œã€æ–‡æ¡£å®Œå–„ | ä½ |

### 1.3 æ¨¡å—åˆ’åˆ†ä¸è€¦åˆåº¦åˆ†æ

#### æ¨¡å—åˆ’åˆ†

1. **æ ¸å¿ƒä¸šåŠ¡æ¨¡å—**
   - å­¦ç”Ÿç®¡ç† (`student`)
   - S-M é‡è¡¨è¯„ä¼° (`sm-assess`)
   - WeeFIM è¯„ä¼° (`weefim-assess`)
   - è®­ç»ƒè®¡åˆ’ (`train-plan`)
   - èµ„æºç®¡ç† (`resource`)

2. **æ”¯æ’‘æ¨¡å—**
   - æ•°æ®åº“æ“ä½œ (`database`)
   - çŠ¶æ€ç®¡ç† (`stores`)
   - è·¯ç”±ç®¡ç† (`router`)
   - ç»„ä»¶åº“ (`components`)

3. **ç³»ç»Ÿæ¨¡å—**
   - è®¤è¯æˆæƒ (`auth`)
   - ç³»ç»Ÿé…ç½® (`system-config`)
   - è®¸å¯è¯ç®¡ç† (`license`)

#### è€¦åˆåº¦åˆ†æ

| æ¨¡å—å¯¹ | è€¦åˆåº¦ | è¯´æ˜ | ä¼˜åŒ–å»ºè®® |
|-------|--------|------|---------|
| ä¸šåŠ¡ â†” æ•°æ®åº“ | é«˜ | ä¸šåŠ¡é€»è¾‘ç›´æ¥ä¾èµ–æ•°æ®åº“ API | é€šè¿‡ä»“å‚¨æ¨¡å¼è§£è€¦ |
| ç»„ä»¶ â†” Store | ä¸­ | ç»„ä»¶ç›´æ¥è¯»å–/å†™å…¥ Store | å·²ä½¿ç”¨ Piniaï¼Œç¬¦åˆæœ€ä½³å®è·µ |
| Store â†” æ•°æ®åº“ | é«˜ | Store ç›´æ¥è°ƒç”¨æ•°æ®åº“ API | å¯å¼•å…¥ Service å±‚ |
| è§†å›¾ â†” ç»„ä»¶ | ä½ | ç»„ä»¶å¤ç”¨æ€§å¥½ | ä¿æŒç°çŠ¶ |

### 1.4 æ€§èƒ½ç“¶é¢ˆç‚¹é¢„åˆ¤

| æ½œåœ¨ç“¶é¢ˆç‚¹ | é£é™©ç­‰çº§ | å½±å“ | ä¼˜åŒ–æ–¹æ¡ˆ |
|-----------|---------|------|---------|
| SQL.js å†…å­˜å ç”¨ | é«˜ | å¤§æ•°æ®é‡æ—¶å†…å­˜æº¢å‡º | ä½¿ç”¨ IndexedDB å­˜å‚¨å¤§æ–‡ä»¶ |
| Electron å¯åŠ¨é€Ÿåº¦ | ä¸­ | å†·å¯åŠ¨è¾ƒæ…¢ | å»¶è¿ŸåŠ è½½éå…³é”®æ¨¡å— |
| å¤§æ–‡ä»¶èµ„æºåŠ è½½ | ä¸­ | è§†é¢‘/éŸ³é¢‘åŠ è½½æ…¢ | ä½¿ç”¨æµå¼åŠ è½½ã€é¢„åŠ è½½ç­–ç•¥ |
| DOM æ¸²æŸ“æ€§èƒ½ | ä½ | è¡¨æ ¼æ•°æ®é‡å¤§æ—¶å¡é¡¿ | è™šæ‹Ÿæ»šåŠ¨ã€åˆ†é¡µåŠ è½½ |
| æ„å»ºåŒ…ä½“ç§¯ | ä¸­ | é¦–æ¬¡åŠ è½½æ…¢ | ä»£ç åˆ†å‰²ã€Tree Shaking |

---

## 2. æ ¸å¿ƒæŠ€æœ¯å‚æ•°è¡¨

### 2.1 è¿è¡Œç¯å¢ƒå‚æ•°

| å‚æ•°ç±»åˆ« | å…·ä½“å‚æ•° | é…ç½®ä½ç½® | æ¨èå€¼/é»˜è®¤å€¼ | è°ƒä¼˜è¯´æ˜ | é£é™©ç­‰çº§ |
|---------|---------|---------|--------------|---------|---------|
| **Node.js** | ç‰ˆæœ¬è¦æ±‚ | `package.json` | `^20.19.0 \|\| >=22.12.0` | ä¸å»ºè®®ä½äº 18.x ç‰ˆæœ¬ | é«˜ |
| **Electron** | ç‰ˆæœ¬ | `package.json` | `34.5.8` | æ¯åŠå¹´æ›´æ–°ä¸€æ¬¡ä»¥è·å–å®‰å…¨è¡¥ä¸ | ä¸­ |
| **æ“ä½œç³»ç»Ÿ** | æ”¯æŒå¹³å° | `electron-builder` | Windows/Mac/Linux | Win10+ã€macOS 10.15+ã€Ubuntu 20.04+ | ä½ |
| **å†…å­˜** | æœ€ä½è¦æ±‚ | æ— é…ç½®æ–‡ä»¶ | `4 GB RAM` | æ¨è 8GB ä»¥ä¸Š | ä¸­ |
| **å­˜å‚¨ç©ºé—´** | å®‰è£…åå ç”¨ | æ— é…ç½®æ–‡ä»¶ | `~200 MB` | æ•°æ®åº“æ–‡ä»¶æ ¹æ®æ•°æ®é‡å¢é•¿ | ä½ |

### 2.2 æ•°æ®åº“å‚æ•°

| å‚æ•°ç±»åˆ« | å…·ä½“å‚æ•° | é…ç½®ä½ç½® | æ¨èå€¼/é»˜è®¤å€¼ | è°ƒä¼˜è¯´æ˜ | é£é™©ç­‰çº§ |
|---------|---------|---------|--------------|---------|---------|
| **SQL.js** | æ•°æ®åº“ç±»å‹ | `database/database.ts` | `In-Memory SQLite` | æ•°æ®ä¿å­˜åœ¨å†…å­˜ï¼Œéœ€å®šæœŸå¯¼å‡º | é«˜ |
| **æ•°æ®æŒä¹…åŒ–** | å­˜å‚¨ä½ç½® | `index.js` | `userData/database.db` | å»ºè®®å®šæœŸå¤‡ä»½æ•°æ®åº“æ–‡ä»¶ | é«˜ |
| **æœ€å¤§è¿æ¥æ•°** | è¿æ¥æ±  | N/A | å•è¿æ¥ï¼ˆæ— è¿æ¥æ± ï¼‰ | SQL.js ä¸æ”¯æŒè¿æ¥æ±  | ä½ |
| **å¹¶å‘æŸ¥è¯¢** | æŸ¥è¯¢æ–¹å¼ | `database/api.ts` | é¡ºåºæ‰§è¡Œ | é¿å…å¹¶å‘æŸ¥è¯¢å¯¼è‡´çš„æ•°æ®ç«äº‰ | ä¸­ |
| **äº‹åŠ¡æ”¯æŒ** | äº‹åŠ¡æ¨¡å¼ | `database/sql-wrapper.ts` | å¼€å¯ | é‡è¦æ“ä½œå¿…é¡»ä½¿ç”¨äº‹åŠ¡ | ä¸­ |

### 2.3 æ„å»ºå‚æ•°

| å‚æ•°ç±»åˆ« | å…·ä½“å‚æ•° | é…ç½®ä½ç½® | æ¨èå€¼/é»˜è®¤å€¼ | è°ƒä¼˜è¯´æ˜ | é£é™©ç­‰çº§ |
|---------|---------|---------|--------------|---------|---------|
| **æ„å»ºå·¥å…·** | Vite ç‰ˆæœ¬ | `vite.config.ts` | `7.2.4` | ä¿æŒä¸æœ€æ–° LTS ç‰ˆæœ¬åŒæ­¥ | ä½ |
| **ä»£ç åˆ†å‰²** | åˆ†å—ç­–ç•¥ | `vite.config.ts` | `manualChunks` | Element Plusã€ECharts å•ç‹¬æ‰“åŒ… | ä¸­ |
| **èµ„æºå‹ç¼©** | å‹ç¼©ç®—æ³• | `vite.config.ts` | `terser` | ç”Ÿäº§ç¯å¢ƒç§»é™¤ consoleã€debugger | ä½ |
| **èµ„æºè·¯å¾„** | Base è·¯å¾„ | `vite.config.ts` | `'./'` (Electron) | Web ç¯å¢ƒä½¿ç”¨ `/` | é«˜ |
| **é™æ€èµ„æº** | å…¬å…±ç›®å½• | `vite.config.ts` | `public/` | å¤§æ–‡ä»¶å»ºè®®æ”¾åœ¨ public ç›®å½• | ä½ |

### 2.4 æ‰“åŒ…å‚æ•°

| å‚æ•°ç±»åˆ« | å…·ä½“å‚æ•° | é…ç½®ä½ç½® | æ¨èå€¼/é»˜è®¤å€¼ | è°ƒä¼˜è¯´æ˜ | é£é™©ç­‰çº§ |
|---------|---------|---------|--------------|---------|---------|
| **App ID** | åº”ç”¨æ ‡è¯† | `package.json` | `com.selfcare.ats` | ä¿æŒå”¯ä¸€æ€§ï¼Œä¸å¯éšæ„ä¿®æ”¹ | é«˜ |
| **è¾“å‡ºç›®å½•** | æ‰“åŒ…è¾“å‡º | `package.json` | `release/` | å¯æ ¹æ®éœ€è¦ä¿®æ”¹ | ä½ |
| **NSIS é…ç½®** | å®‰è£…é€‰é¡¹ | `package.json` | `oneClick: false` | å…è®¸ç”¨æˆ·é€‰æ‹©å®‰è£…è·¯å¾„ | ä½ |
| **æ¡Œé¢å¿«æ·æ–¹å¼** | åˆ›å»ºå¿«æ·æ–¹å¼ | `package.json` | `true` | æå‡ç”¨æˆ·ä½“éªŒ | ä½ |
| **å¸è½½è¡Œä¸º** | åˆ é™¤æ•°æ® | `package.json` | `false` | ä¿æŠ¤ç”¨æˆ·æ•°æ®ä¸ä¸¢å¤± | é«˜ |

### 2.5 åº”ç”¨è¿è¡Œå‚æ•°

| å‚æ•°ç±»åˆ« | å…·ä½“å‚æ•° | é…ç½®ä½ç½® | æ¨èå€¼/é»˜è®¤å€¼ | è°ƒä¼˜è¯´æ˜ | é£é™©ç­‰çº§ |
|---------|---------|---------|--------------|---------|---------|
| **DevTools** | å¼€å‘å·¥å…· | `electron/main.js` | ç”Ÿäº§ç¯å¢ƒå…³é—­ | é˜²æ­¢è°ƒè¯•ä¿¡æ¯æ³„éœ² | ä¸­ |
| **CORS** | è·¨åŸŸç­–ç•¥ | N/A | ä¸é€‚ç”¨ï¼ˆæ¡Œé¢åº”ç”¨ï¼‰ | Web ç‰ˆæœ¬éœ€è¦é…ç½® CORS | ä½ |
| **æ—¥å¿—çº§åˆ«** | æ—¥å¿—è¾“å‡º | è‡ªå®šä¹‰ | `info` | å¼€å‘ç¯å¢ƒ debugï¼Œç”Ÿäº§ç¯å¢ƒ warn | ä¸­ |
| **ç¼“å­˜ç­–ç•¥** | èµ„æºç¼“å­˜ | N/A | æ— å¤–éƒ¨ç¼“å­˜ | Electron ä½¿ç”¨æœ¬åœ°èµ„æº | ä½ |
| **è‡ªåŠ¨æ›´æ–°** | æ›´æ–°æ£€æŸ¥ | æœªå®ç° | æ‰‹åŠ¨æ›´æ–° | å»ºè®®å®ç°è‡ªåŠ¨æ›´æ–°æœºåˆ¶ | ä¸­ |

---

## 3. éƒ¨ç½²å‚æ•°æ¸…å•

### 3.1 ç¡¬ä»¶èµ„æºè¦æ±‚

#### å¼€å‘ç¯å¢ƒ

| èµ„æºç±»å‹ | æœ€ä½é…ç½® | æ¨èé…ç½® | è¯´æ˜ |
|---------|---------|---------|------|
| **CPU** | åŒæ ¸ 2.0 GHz | å››æ ¸ 3.0 GHz+ | ç¼–è¯‘é€Ÿåº¦ä¸ CPU æ ¸å¿ƒæ•°ç›¸å…³ |
| **å†…å­˜** | 8 GB | 16 GB+ | Node.js + Vite + Electron å¼€å‘æœåŠ¡å™¨ |
| **å­˜å‚¨** | 10 GB å¯ç”¨ç©ºé—´ | 20 GB+ | node_modules å’Œ dist ç›®å½•å ç”¨ç©ºé—´è¾ƒå¤§ |
| **ç½‘ç»œ** | 10 Mbps | 50 Mbps+ | é¦–æ¬¡å®‰è£…ä¾èµ–éœ€è¦ä¸‹è½½å¤§é‡æ–‡ä»¶ |

#### ç”Ÿäº§ç¯å¢ƒï¼ˆç»ˆç«¯ç”¨æˆ·ï¼‰

| èµ„æºç±»å‹ | æœ€ä½é…ç½® | æ¨èé…ç½® | è¯´æ˜ |
|---------|---------|---------|------|
| **CPU** | åŒæ ¸ 1.8 GHz | åŒæ ¸ 2.4 GHz+ | åŸºç¡€è¯„ä¼°å’Œæ•°æ®æ“ä½œ |
| **å†…å­˜** | 4 GB | 8 GB+ | å¤§æ•°æ®é‡è¯„ä¼°éœ€è¦æ›´å¤šå†…å­˜ |
| **å­˜å‚¨** | 500 MB å¯ç”¨ç©ºé—´ | 2 GB+ | åº”ç”¨ + æ•°æ®åº“ + èµ„æºæ–‡ä»¶ |
| **ç½‘ç»œ** | ä¸è¦æ±‚ | ä¸è¦æ±‚ | åº”ç”¨æ”¯æŒç¦»çº¿è¿è¡Œ |

### 3.2 ç«¯å£å ç”¨æ¸…å•ä¸é˜²ç«å¢™é…ç½®

| ç«¯å£ | ä½¿ç”¨åœºæ™¯ | åè®® | é˜²ç«å¢™é…ç½® | å¤‡æ³¨ |
|------|---------|------|-----------|------|
| **5173** | Vite å¼€å‘æœåŠ¡å™¨ | HTTP | å…è®¸å…¥ç«™/å‡ºç«™ | å¼€å‘ç¯å¢ƒä¸“ç”¨ |
| **5858** | Node.js è°ƒè¯•ç«¯å£ | TCP | å…è®¸å…¥ç«™ï¼ˆå¼€å‘æ—¶ï¼‰ | å¯é€‰ï¼Œç”¨äºä¸»è¿›ç¨‹è°ƒè¯• |
| **æ— éœ€ç«¯å£** | Electron åº”ç”¨ | N/A | æ— éœ€é…ç½® | ä½¿ç”¨ file:// åè®® |

#### é˜²ç«å¢™é…ç½®å»ºè®®

```powershell
# Windows é˜²ç«å¢™å¼€å‘ç¯å¢ƒé…ç½®
# å…è®¸ç«¯å£ 5173 (Vite å¼€å‘æœåŠ¡å™¨)
New-NetFirewallRule -DisplayName "Vite Dev Server" `
  -Direction Inbound -LocalPort 5173 -Protocol TCP `
  -Action Allow

# å…è®¸ç«¯å£ 5858 (Node.js è°ƒè¯•)
New-NetFirewallRule -DisplayName "Node.js Debugger" `
  -Direction Inbound -LocalPort 5858 -Protocol TCP `
  -Action Allow
```

### 3.3 ç¯å¢ƒå˜é‡å®Œæ•´åˆ—è¡¨

| å˜é‡å | ç±»å‹ | å¿…éœ€ | é»˜è®¤å€¼ | è¯´æ˜ | é£é™©ç­‰çº§ |
|-------|------|------|--------|------|---------|
| `ELECTRON` | String | å¦ | `undefined` | æ ‡è¯†æ˜¯å¦åœ¨ Electron ç¯å¢ƒä¸­è¿è¡Œ | ä½ |
| `NODE_ENV` | String | å¦ | `development` | ç¯å¢ƒæ ‡è¯†ï¼šdevelopment/production | ä½ |
| `VITE_PORT` | Number | å¦ | `5173` | å¼€å‘æœåŠ¡å™¨ç«¯å£ | ä½ |
| `APP_NAME` | String | æ˜¯ | `ç”Ÿæ´»è‡ªç†é€‚åº”ç»¼åˆè®­ç»ƒ` | åº”ç”¨åç§° | ä½ |
| `APP_VERSION` | String | æ˜¯ | `1.0.0` | åº”ç”¨ç‰ˆæœ¬å· | ä½ |
| `DATABASE_NAME` | String | å¦ | `selfcare_ats.db` | æ•°æ®åº“æ–‡ä»¶å | ä¸­ |
| `BACKUP_ENABLED` | Boolean | å¦ | `true` | æ˜¯å¦å¯ç”¨è‡ªåŠ¨å¤‡ä»½ | ä¸­ |
| `BACKUP_INTERVAL` | Number | å¦ | `86400000` | å¤‡ä»½é—´éš”ï¼ˆæ¯«ç§’ï¼Œé»˜è®¤24å°æ—¶ï¼‰ | ä½ |
| `LOG_LEVEL` | String | å¦ | `info` | æ—¥å¿—çº§åˆ«ï¼šdebug/info/warn/error | ä½ |

### 3.4 å¥åº·æ£€æŸ¥æ¥å£è®¾è®¡

ç”±äºç³»ç»Ÿä¸ºæ¡Œé¢åº”ç”¨ï¼Œå¥åº·æ£€æŸ¥é€šè¿‡å†…éƒ¨æœºåˆ¶å®ç°ï¼š

```typescript
// å¥åº·æ£€æŸ¥æ¥å£ç¤ºä¾‹
interface HealthCheckResult {
  status: 'healthy' | 'unhealthy' | 'degraded'
  timestamp: number
  checks: {
    database: boolean
    storage: boolean
    license: boolean
    memory: {
      used: number
      total: number
      percentage: number
    }
  }
}

// å¥åº·æ£€æŸ¥å®ç°
export async function healthCheck(): Promise<HealthCheckResult> {
  const db = await getDatabase()
  const storage = navigator.storage
  const license = await checkLicenseStatus()

  return {
    status: 'healthy',
    timestamp: Date.now(),
    checks: {
      database: db !== null,
      storage: storage !== undefined,
      license: license.valid,
      memory: {
        used: performance.memory?.usedJSHeapSize || 0,
        total: performance.memory?.totalJSHeapSize || 0,
        percentage: (performance.memory?.usedJSHeapSize / performance.memory?.totalJSHeapSize) * 100 || 0
      }
    }
  }
}
```

---

## 4. å®‰å…¨å‚æ•°å®¡è®¡

### 4.1 æ•æ„Ÿä¿¡æ¯åŠ å¯†æ–¹å¼

| æ•°æ®ç±»å‹ | åŠ å¯†ç®—æ³• | å¯†é’¥é•¿åº¦ | å®ç°ä½ç½® | å®‰å…¨ç­‰çº§ |
|---------|---------|---------|---------|---------|
| **å¯†ç ** | SHA-256 | 256 ä½ | æœªå®ç°ï¼ˆå»ºè®®æ·»åŠ ï¼‰ | ä¸­ |
| **æ¿€æ´»ç ** | è‡ªå®šä¹‰ç®—æ³• | æœªå…¬å¼€ | `scripts/generate-activation.js` | ä¸­ |
| **è®¸å¯è¯å¯†é’¥** | AES-256 | 256 ä½ | æœªå®ç°ï¼ˆå»ºè®®æ·»åŠ ï¼‰ | é«˜ |
| **æ•°æ®åº“æ–‡ä»¶** | ä¸åŠ å¯† | N/A | æœ¬åœ°æ–‡ä»¶ç³»ç»Ÿ | ä½ |
| **æ—¥å¿—æ–‡ä»¶** | ä¸åŠ å¯† | N/A | æœ¬åœ°æ–‡ä»¶ç³»ç»Ÿ | ä½ |

#### å®‰å…¨å»ºè®®

âš ï¸ **é«˜é£é™©é¡¹**ï¼š
1. æ•°æ®åº“æ–‡ä»¶æœªåŠ å¯†ï¼Œæ•æ„Ÿæ•°æ®ï¼ˆå­¦ç”Ÿä¿¡æ¯ã€è¯„ä¼°è®°å½•ï¼‰å¯èƒ½æ³„éœ²
2. å¯†ç æœªåŠ å¯†å­˜å‚¨
3. ç¼ºå°‘ HTTPS/TLS åŠ å¯†ï¼ˆæ¡Œé¢åº”ç”¨å¯æ¥å—ï¼‰

**æ¨èæ”¹è¿›**ï¼š
```typescript
// å»ºè®®ä½¿ç”¨åŠ å¯†åº“åŠ å¯†æ•æ„Ÿæ•°æ®
import CryptoJS from 'crypto-js'

// å¯†ç åŠ å¯†
function encryptPassword(password: string): string {
  const salt = CryptoJS.lib.WordArray.random(128/8)
  const key = CryptoJS.PBKDF2(password, salt, {
    keySize: 256/32,
    iterations: 1000
  })
  return key.toString()
}

// æ•°æ®åŠ å¯†
function encryptData(data: string, secretKey: string): string {
  return CryptoJS.AES.encrypt(data, secretKey).toString()
}
```

### 4.2 API æƒé™çŸ©é˜µï¼ˆRBAC æ¨¡å‹ï¼‰

ç³»ç»Ÿå½“å‰æœªå®ç°å®Œå–„çš„ RBACï¼Œå»ºè®®å®ç°ä»¥ä¸‹æƒé™æ¨¡å‹ï¼š

| è§’è‰² | å­¦ç”Ÿç®¡ç† | è¯„ä¼°æ“ä½œ | è®­ç»ƒè®¡åˆ’ | èµ„æºç®¡ç† | ç³»ç»Ÿé…ç½® | ç”¨æˆ·ç®¡ç† |
|------|---------|---------|---------|---------|---------|---------|
| **admin** | âœ… å…¨éƒ¨ | âœ… å…¨éƒ¨ | âœ… å…¨éƒ¨ | âœ… å…¨éƒ¨ | âœ… å…¨éƒ¨ | âœ… å…¨éƒ¨ |
| **teacher** | âœ… æŸ¥çœ‹å’Œç¼–è¾‘ | âœ… å…¨éƒ¨ | âœ… å…¨éƒ¨ | âœ… æŸ¥çœ‹å’Œä¸Šä¼  | âœ… æŸ¥çœ‹ | âŒ æ— æƒé™ |
| **auditor** | âœ… ä»…æŸ¥çœ‹ | âœ… ä»…æŸ¥çœ‹ | âœ… ä»…æŸ¥çœ‹ | âœ… ä»…æŸ¥çœ‹ | âœ… ä»…æŸ¥çœ‹ | âŒ æ— æƒé™ |

#### æƒé™å®ç°å»ºè®®

```typescript
// æƒé™å®šä¹‰
export enum Permission {
  STUDENT_VIEW = 'student:view',
  STUDENT_EDIT = 'student:edit',
  STUDENT_DELETE = 'student:delete',
  ASSESS_CREATE = 'assess:create',
  ASSESS_VIEW = 'assess:view',
  ASSESS_DELETE = 'assess:delete',
  SYSTEM_CONFIG = 'system:config',
  USER_MANAGE = 'user:manage'
}

// è§’è‰²æƒé™æ˜ å°„
const rolePermissions: Record<string, Permission[]> = {
  admin: Object.values(Permission),
  teacher: [
    Permission.STUDENT_VIEW,
    Permission.STUDENT_EDIT,
    Permission.ASSESS_CREATE,
    Permission.ASSESS_VIEW,
    Permission.ASSESS_DELETE
  ],
  auditor: [
    Permission.STUDENT_VIEW,
    Permission.ASSESS_VIEW
  ]
}

// æƒé™æ£€æŸ¥å‡½æ•°
export function hasPermission(userRole: string, permission: Permission): boolean {
  return rolePermissions[userRole]?.includes(permission) || false
}
```

### 4.3 CORS é…ç½®ç­–ç•¥

ç”±äºç³»ç»Ÿä¸º Electron æ¡Œé¢åº”ç”¨ï¼ŒCORS ä¸æ˜¯ä¸»è¦å®‰å…¨è€ƒè™‘ç‚¹ã€‚ä½†å¦‚æœéœ€è¦æ”¯æŒ Web ç‰ˆæœ¬ï¼š

```typescript
// Vite å¼€å‘æœåŠ¡å™¨ CORS é…ç½®
export default defineConfig({
  server: {
    cors: {
      origin: ['http://localhost:5173', 'https://yourdomain.com'],
      methods: ['GET', 'POST', 'PUT', 'DELETE'],
      allowedHeaders: ['Content-Type', 'Authorization']
    }
  }
})
```

### 4.4 æ•°æ®è„±æ•è§„åˆ™

| æ•°æ®ç±»å‹ | è„±æ•è§„åˆ™ | å®ç°ä½ç½® | å½“å‰çŠ¶æ€ |
|---------|---------|---------|---------|
| **å­¦ç”Ÿå§“å** | ä¿ç•™å§“æ°ï¼Œå§“åç”¨ `*` æ›¿ä»£ | æœªå®ç° | âŒ æœªå®ç° |
| **æ‰‹æœºå·** | ä¿ç•™å‰3å4ä½ | æœªå®ç° | âŒ æœªå®ç° |
| **èº«ä»½è¯å·** | ä¿ç•™å‰6å4ä½ | æœªå®ç° | âŒ æœªå®ç° |
| **è¯„ä¼°è¯¦æƒ…** | æ•æ„Ÿæ•°æ®éœ€æˆæƒæŸ¥çœ‹ | æœªå®ç° | âŒ æœªå®ç° |

#### è„±æ•å®ç°ç¤ºä¾‹

```typescript
// æ•°æ®è„±æ•å·¥å…·å‡½æ•°
export function maskName(name: string): string {
  if (name.length <= 1) return name
  return name[0] + '*'.repeat(name.length - 1)
}

export function maskPhone(phone: string): string {
  if (phone.length !== 11) return phone
  return phone.slice(0, 3) + '****' + phone.slice(-4)
}

export function maskIdCard(idCard: string): string {
  if (idCard.length !== 18) return idCard
  return idCard.slice(0, 6) + '********' + idCard.slice(-4)
}
```

---

## 5. æ€§èƒ½ä¼˜åŒ–æŒ‡å—

### 5.1 åº”ç”¨å¯åŠ¨æ€§èƒ½

| ä¼˜åŒ–é¡¹ | å½“å‰çŠ¶æ€ | ç›®æ ‡å€¼ | å®æ–½æ–¹æ¡ˆ |
|-------|---------|--------|---------|
| **å†·å¯åŠ¨æ—¶é—´** | ~3-5 ç§’ | < 2 ç§’ | å»¶è¿ŸåŠ è½½éæ ¸å¿ƒæ¨¡å—ã€é¢„ç¼–è¯‘ |
| **çƒ­å¯åŠ¨æ—¶é—´** | ~1-2 ç§’ | < 1 ç§’ | ç¼“å­˜å·²åŠ è½½æ•°æ®ã€ä¼˜åŒ–åˆå§‹åŒ–æµç¨‹ |
| **é¦–æ¬¡æ¸²æŸ“æ—¶é—´** | ~1 ç§’ | < 500ms | ç»„ä»¶æ‡’åŠ è½½ã€è™šæ‹Ÿæ»šåŠ¨ |

### 5.2 æ•°æ®åº“æ€§èƒ½ä¼˜åŒ–

| ä¼˜åŒ–é¡¹ | é…ç½®æ–¹æ³• | é¢„æœŸæ•ˆæœ | å®æ–½éš¾åº¦ |
|-------|---------|---------|---------|
| **ç´¢å¼•ä¼˜åŒ–** | ä¸ºå¸¸ç”¨æŸ¥è¯¢å­—æ®µæ·»åŠ ç´¢å¼• | æŸ¥è¯¢é€Ÿåº¦æå‡ 50%+ | ä¸­ |
| **æ‰¹é‡æ“ä½œ** | ä½¿ç”¨äº‹åŠ¡æ‰¹é‡æ’å…¥ | æ’å…¥é€Ÿåº¦æå‡ 10x | ä½ |
| **æŸ¥è¯¢ç¼“å­˜** | Pinia ç¼“å­˜æŸ¥è¯¢ç»“æœ | å‡å°‘é‡å¤æŸ¥è¯¢ | ä½ |
| **åˆ†é¡µåŠ è½½** | å®ç°è™šæ‹Ÿåˆ†é¡µ | å†…å­˜å ç”¨é™ä½ 70% | ä¸­ |

#### ç´¢å¼•ä¼˜åŒ–ç¤ºä¾‹

```sql
-- ä¸ºå¸¸ç”¨æŸ¥è¯¢å­—æ®µæ·»åŠ ç´¢å¼•
CREATE INDEX idx_student_name ON student(name);
CREATE INDEX idx_sm_assess_student ON sm_assess(student_id);
CREATE INDEX idx_sm_assess_date ON sm_assess(start_time);
CREATE INDEX idx_train_plan_student ON train_plan(student_id);
```

### 5.3 å†…å­˜ä¼˜åŒ–

| ä¼˜åŒ–é¡¹ | å½“å‰é—®é¢˜ | ä¼˜åŒ–æ–¹æ¡ˆ | é¢„æœŸæ•ˆæœ |
|-------|---------|---------|---------|
| **å¤§æ–‡ä»¶åŠ è½½** | è§†é¢‘/éŸ³é¢‘ä¸€æ¬¡æ€§åŠ è½½ | æµå¼åŠ è½½ã€åˆ†å—ä¼ è¾“ | å†…å­˜å ç”¨é™ä½ 60% |
| **DOM èŠ‚ç‚¹è¿‡å¤š** | åˆ—è¡¨æ•°æ®å…¨éƒ¨æ¸²æŸ“ | è™šæ‹Ÿæ»šåŠ¨ | DOM èŠ‚ç‚¹å‡å°‘ 90% |
| **äº‹ä»¶ç›‘å¬æ³„æ¼** | ç»„ä»¶é”€æ¯æœªæ¸…ç† | ä½¿ç”¨ `onUnmounted` æ¸…ç† | é˜²æ­¢å†…å­˜æ³„æ¼ |
| **é—­åŒ…å¼•ç”¨** | æœªåŠæ—¶é‡Šæ”¾å¤§å¯¹è±¡ | åŠæ—¶ç½®ç©ºå¼•ç”¨ | å‡å°‘å†…å­˜å ç”¨ |

#### è™šæ‹Ÿæ»šåŠ¨å®ç°ç¤ºä¾‹

```vue
<template>
  <el-table-v2
    :columns="columns"
    :data="tableData"
    :width="700"
    :height="400"
    fixed
  />
</template>

<script setup lang="ts">
import { ref } from 'vue'

// ä½¿ç”¨è™šæ‹Ÿæ»šåŠ¨å¤„ç†å¤§æ•°æ®é‡
const tableData = ref([])
const columns = ref([...])
</script>
```

---

## 6. æ•…éšœæ’æŸ¥ä¸ç›‘æ§

### 6.1 å¸¸è§æ•…éšœæ’æŸ¥è¡¨

| ç°è±¡ | å¯èƒ½åŸå›  | æ’æŸ¥å‘½ä»¤/æ–¹æ³• | è§£å†³æ–¹æ¡ˆ | é£é™©ç­‰çº§ |
|-----|---------|--------------|---------|---------|
| **åº”ç”¨æ— æ³•å¯åŠ¨** | æ•°æ®åº“æ–‡ä»¶æŸå | æ£€æŸ¥ database.db æ–‡ä»¶å¤§å° | æ¢å¤å¤‡ä»½æ•°æ®åº“ | é«˜ |
| **åº”ç”¨å¯åŠ¨ç¼“æ…¢** | ä¾èµ–æœªæ›´æ–° | `npm outdated` | è¿è¡Œ `npm update` | ä½ |
| **è¯„ä¼°æ•°æ®ä¸¢å¤±** | æ•°æ®æœªä¿å­˜ | æ£€æŸ¥æ§åˆ¶å°é”™è¯¯ | ä¿®å¤äº‹åŠ¡æäº¤é€»è¾‘ | é«˜ |
| **å¯¼å‡ºæŠ¥å‘Šå¤±è´¥** | æ–‡ä»¶æƒé™é—®é¢˜ | æ£€æŸ¥ä¸´æ—¶ç›®å½•æƒé™ | ä»¥ç®¡ç†å‘˜èº«ä»½è¿è¡Œ | ä¸­ |
| **è®¸å¯è¯éªŒè¯å¤±è´¥** | æœºå™¨ç å˜åŒ– | é‡æ–°è·å–æœºå™¨ç  | é‡æ–°æ¿€æ´»è®¸å¯è¯ | ä¸­ |
| **å†…å­˜å ç”¨è¿‡é«˜** | å†…å­˜æ³„æ¼ | ä½¿ç”¨ DevTools Memory å·¥å…· | ä¿®å¤äº‹ä»¶ç›‘å¬æ¸…ç† | ä¸­ |

### 6.2 ç›‘æ§æŒ‡æ ‡å®šä¹‰

| æŒ‡æ ‡ç±»å‹ | æŒ‡æ ‡åç§° | æ­£å¸¸èŒƒå›´ | å‘Šè­¦é˜ˆå€¼ | ç›‘æ§æ–¹å¼ |
|---------|---------|---------|---------|---------|
| **æ€§èƒ½æŒ‡æ ‡** | åº”ç”¨å¯åŠ¨æ—¶é—´ | < 2s | > 5s | è‡ªåŠ¨è®°å½• |
| **æ€§èƒ½æŒ‡æ ‡** | é¡µé¢å“åº”æ—¶é—´ | < 100ms | > 500ms | Performance API |
| **èµ„æºæŒ‡æ ‡** | å†…å­˜å ç”¨ | < 500MB | > 1GB | performance.memory |
| **èµ„æºæŒ‡æ ‡** | æ•°æ®åº“å¤§å° | < 100MB | > 500MB | æ–‡ä»¶ç³»ç»Ÿ API |
| **ä¸šåŠ¡æŒ‡æ ‡** | è¯„ä¼°æˆåŠŸç‡ | > 95% | < 90% | ä¸šåŠ¡æ—¥å¿— |
| **ä¸šåŠ¡æŒ‡æ ‡** | æ•°æ®å¤‡ä»½æˆåŠŸç‡ | 100% | < 100% | å¤‡ä»½æ—¥å¿— |

### 6.3 æ—¥å¿—ç®¡ç†

#### æ—¥å¿—çº§åˆ«å®šä¹‰

| çº§åˆ« | ç”¨é€” | ç¤ºä¾‹ |
|------|------|------|
| **DEBUG** | è¯¦ç»†è°ƒè¯•ä¿¡æ¯ | å‡½æ•°å‚æ•°ã€ä¸­é—´çŠ¶æ€ |
| **INFO** | ä¸€èˆ¬ä¿¡æ¯ | åº”ç”¨å¯åŠ¨ã€ç”¨æˆ·æ“ä½œ |
| **WARN** | è­¦å‘Šä¿¡æ¯ | æ½œåœ¨é—®é¢˜ã€é™çº§æ“ä½œ |
| **ERROR** | é”™è¯¯ä¿¡æ¯ | å¼‚å¸¸æ•è·ã€æ“ä½œå¤±è´¥ |

#### æ—¥å¿—æ–‡ä»¶ç®¡ç†

```typescript
// æ—¥å¿—è½®è½¬é…ç½®
const logConfig = {
  maxFileSize: 10 * 1024 * 1024, // 10MB
  maxFiles: 5,                    // ä¿ç•™ 5 ä¸ªæ—¥å¿—æ–‡ä»¶
  compress: true,                 // å‹ç¼©æ—§æ—¥å¿—
  datePattern: 'YYYY-MM-DD'        // æŒ‰æ—¥æœŸåˆ†å‰²
}
```

---

## 7. é™„å½•

### 7.1 æŠ€æœ¯æœ¯è¯­å¯¹ç…§è¡¨

| è‹±æ–‡æœ¯è¯­ | ä¸­æ–‡è§£é‡Š | ä¸Šä¸‹æ–‡ |
|---------|---------|--------|
| **Electron** | è·¨å¹³å°æ¡Œé¢åº”ç”¨æ¡†æ¶ | ä½¿ç”¨ Web æŠ€æœ¯æ„å»ºæ¡Œé¢åº”ç”¨ |
| **SQL.js** | SQLite çš„ JavaScript ç§»æ¤ç‰ˆ | åœ¨æµè§ˆå™¨/Node.js ä¸­è¿è¡Œ SQLite |
| **Pinia** | Vue 3 å®˜æ–¹çŠ¶æ€ç®¡ç†åº“ | ç®¡ç†åº”ç”¨å…¨å±€çŠ¶æ€ |
| **Vite** | ä¸‹ä¸€ä»£å‰ç«¯æ„å»ºå·¥å…· | å¿«é€Ÿçš„å¼€å‘æœåŠ¡å™¨å’Œæ„å»ºå·¥å…· |
| **ESM** | ECMAScript Modules | åŸç”Ÿ JavaScript æ¨¡å—ç³»ç»Ÿ |
| **HMR** | Hot Module Replacement | çƒ­æ¨¡å—æ›¿æ¢ï¼Œå¼€å‘æ—¶æ— åˆ·æ–°æ›´æ–° |
| **RBAC** | Role-Based Access Control | åŸºäºè§’è‰²çš„è®¿é—®æ§åˆ¶ |
| **NSIS** | Nullsoft Scriptable Install System | Windows å®‰è£…ç¨‹åºåˆ¶ä½œå·¥å…· |
| **CORS** | Cross-Origin Resource Sharing | è·¨åŸŸèµ„æºå…±äº« |

### 7.2 ç›¸å…³æ–‡ä»¶ä½ç½®

| æ–‡ä»¶ç±»å‹ | è·¯å¾„ | è¯´æ˜ |
|---------|------|------|
| **é…ç½®æ–‡ä»¶** | `self-care-ats/vite.config.ts` | Vite æ„å»ºé…ç½® |
| **é…ç½®æ–‡ä»¶** | `self-care-ats/package.json` | é¡¹ç›®é…ç½®å’Œä¾èµ– |
| **æ•°æ®åº“é…ç½®** | `self-care-ats/src/database/` | æ•°æ®åº“åˆå§‹åŒ–å’Œ API |
| **è·¯ç”±é…ç½®** | `self-care-ats/src/router/index.ts` | Vue Router è·¯ç”±å®šä¹‰ |
| **çŠ¶æ€ç®¡ç†** | `self-care-ats/src/stores/` | Pinia Store å®šä¹‰ |
| **ç»„ä»¶ç›®å½•** | `self-care-ats/src/components/` | Vue ç»„ä»¶ |
| **ä¸»è¿›ç¨‹** | `self-care-ats/electron/main.js` | Electron ä¸»è¿›ç¨‹å…¥å£ |
| **æ„å»ºäº§ç‰©** | `self-care-ats/dist/` | Vite æ„å»ºè¾“å‡º |
| **æ‰“åŒ…è¾“å‡º** | `self-care-ats/release/` | Electron Builder æ‰“åŒ…è¾“å‡º |

### 7.3 ç‰ˆæœ¬å†å²

| ç‰ˆæœ¬å· | æ—¥æœŸ | å˜æ›´å†…å®¹ | ä½œè€… |
|-------|------|---------|------|
| v1.0.0 | 2025-12-31 | åˆå§‹ç‰ˆæœ¬ | Claude AI |

---

## ğŸ“ æŠ€æœ¯æ”¯æŒ

- **æŠ€æœ¯è´Ÿè´£äºº**: æ­å·ç‚«ç¿ç§‘æŠ€æœ‰é™å…¬å¸
- **è”ç³»é‚®ç®±**: [è¯·è”ç³»å…¬å¸è·å–]
- **æŠ€æœ¯æ–‡æ¡£ç‰ˆæœ¬**: v1.0.0

---

**æ–‡æ¡£ç»“æŸ**
